---
layout: default
---

<!-- CENTERED ARTICLE CONTENT - Header First -->
<article class="post-container">
  <div class="post-header">
    <div class="post-category">
      <span class="category-tag {{ page.category }}">{{ page.category }}</span>
    </div>
    <h1 class="post-title">{{ page.title }}</h1>
    {% if page.excerpt %}
    <div class="post-lede">{{ page.excerpt | strip_html }}</div>
    {% endif %}
  </div>

  <!-- FULL-WIDTH IMAGE AFTER HEADER -->
  {% if page.image %}
  <div class="post-hero-image">
    <img src="{{ page.image | relative_url }}" alt="{{ page.title }}">
    {% if page.image_caption or page.image_credit %}
      <div class="post-image-caption">
        {% if page.image_caption %}{{ page.image_caption }}{% endif %}
        {% if page.image_credit %}<span class="credit"> {{ page.image_credit }}</span>{% endif %}
      </div>
    {% endif %}
  </div>
  {% endif %}

  <!-- Author sidebar + Content wrapper -->
  <div class="post-body-wrapper">
    {% if page.author %}
    <aside class="post-author-sidebar">
      {% if page.author_image %}
      <img src="{{ page.author_image | relative_url }}" alt="{{ page.author }}" class="author-photo">
      {% endif %}
      <div class="author-name">{{ page.author }}</div>
      {% if page.author_role %}
      <div class="author-role">{{ page.author_role }}</div>
      {% endif %}
      <time class="post-date" datetime="{{ page.date | date: '%Y-%m-%d' }}">{{ page.date | date: "%-d %B %Y" }}</time>
    </aside>
    {% endif %}

    <div class="post-content">
      {{ content }}
    </div>
  </div>

  {% if site.data.current_issue %}
  <aside class="current-issue-callout">
    <p class="current-issue-heading">In Print</p>
    <a href="{{ site.data.current_issue.link | relative_url }}" class="current-issue-image-link">
      <img src="{{ site.data.current_issue.image | relative_url }}" alt="Current issue cover">
    </a>
    <a href="{{ site.data.current_issue.link | relative_url }}" class="current-issue-link">{{ site.data.current_issue.title }}</a>
  </aside>
  <script>
    window.addEventListener('load', function() {
      const callout = document.querySelector('.current-issue-callout');
      const content = document.querySelector('.post-content');
      const container = document.querySelector('.post-container');
      if (!callout || !content || !container) return;

      const paragraphs = content.querySelectorAll('p');
      if (paragraphs.length < 3) return;

      const midIndex = Math.floor(paragraphs.length / 2);
      const midParagraph = paragraphs[midIndex];

      // Use offsetTop to get position relative to offset parent (the container)
      // Walk up the offset chain to get total offset from container
      let offset = 0;
      let el = midParagraph;
      while (el && el !== container) {
        offset += el.offsetTop;
        el = el.offsetParent;
      }

      callout.style.top = offset + 'px';
    });
  </script>
  {% endif %}
</article>
